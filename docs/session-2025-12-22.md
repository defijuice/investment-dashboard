# Claude Code 세션 기록

**생성일**: 2025-12-22
**총 작업 수**: 383개

---

## 2025-12-20: KVIC 출자사업 자동화 프로젝트 시작

### 1. 프로젝트 초기 설정

**사용자 명령:**
```
https://www.kvic.or.kr/notice/kvic-notice/investment-business-notice 사이트에서 접수현황/선정결과 카테고리 게시글의 첨부파일을 다운로드 받아서 구글드라이브에 올리는 자동화
```

**작업 내용:**
- Puppeteer 기반 KVIC 스크래퍼 구현
- Google Drive OAuth 인증 설정
- 자동 다운로드 및 업로드 워크플로우 구축

---

### 2. 에어테이블 테이블 구조 설정

**작업 내용:**
- 운용사, 출자사업, 신청현황, 파일처리이력 테이블 생성
- 테이블 간 링크 관계 설정
- Data Validation (Single Select) 필드 구성

---

### 3. PDF 선정결과 파싱 시스템

**작업 내용:**
- `/update {파일번호}` 커스텀 커맨드 생성
- PDF에서 운용사명, 출자분야, 금액 등 추출
- 중복 운용사 체크 및 typecast 활용한 옵션 자동 생성

---

### 4. 파일처리이력 테이블 추가

**작업 내용:**
- 처리상태(대기/처리중/완료/오류) 관리
- 파일URL 필드로 Google Drive 링크 저장
- 신청현황 테이블과 링크 연결

---

## 2025-12-21: Google Sheets 마이그레이션 및 PDF 파싱 고도화

### 5. 에어테이블 → Google Sheets 마이그레이션

**사용자 명령:**
```
에어테이블 말고 구글스프레드시트로 하고 싶어
```

**작업 내용:**
- Google Sheets API 클라이언트 구현 (src/googleSheets.js)
- 4개 시트 구조 설정 (운용사, 출자사업, 신청현황, 파일)
- Data Validation 드롭다운 설정
- ID 자동 생성 (OP, PJ, AP, FH 프리픽스)

---

### 6. pdfplumber 기반 PDF 파서 개발

**작업 내용:**
- Python 스크립트로 PDF 표 추출 (src/pdf-parser.py)
- 이중 파싱 방식 도입 (Claude + pdfplumber 비교)
- 공동GP 분리 처리 로직

---

### 7. 운용사 매칭 시스템 구현

**작업 내용:**
- 유사도 검사 알고리즘 (정규화, 접미사 제거, 자모 분해, 초성 비교)
- 영문 약어 ↔ 한글 발음 매칭 (KB ↔ 케이비, BNK ↔ 비엔케이)
- 85% 이상 유사도 시 사용자 확인 요청

---

### 8. 검토/승인 워크플로우

**작업 내용:**
- 터미널 테이블 UI로 파싱 결과 표시
- 수정(e), 승인(y), 취소(n) 명령어
- 신규 운용사, 중복 스킵, 공동GP 분리 결과 요약

---

## 2025-12-22: 관리자 대시보드 및 도구 개발

### 9. React 관리자 대시보드 개발

**작업 내용:**
- Vite + React 18 프로젝트 구성
- 대시보드: 통계 요약, Top Tier 랭킹 차트
- 운용사/출자사업 목록 및 상세 페이지
- 파일 비교 모달 (PDF 뷰어 + 신청현황 테이블)

---

### 10. Vercel Serverless Functions 배포

**작업 내용:**
- API 서버를 Vercel Functions로 이전
- CORS 설정 및 환경변수 관리
- 프론트엔드 + API 통합 배포

---

### 11. org-matcher 도구 생성

**사용자 명령:**
```
/create-tool → 1번 (operator-matcher)
```

**작업 내용:**
- TypeScript CLI 도구 개발
- 조직명/회사명 유사도 매칭 기능
- 9단계 유사도 검사 알고리즘
- GitHub 저장소 생성 및 npm link 설치
- 저장 위치: `/Users/dahye.dyan/Documents/DEV/create-tool/org-matcher`

**사용법:**
```bash
org-matcher compare "BNK투자회사" "비엔케이투자회사"
# 유사도: 85% - 영문 약어 ↔ 한글 발음 매칭
```

---

## 주요 배운 점

1. **Google Sheets API**: `typecast` 대신 직접 ID로 셀 값 설정
2. **PDF 파싱**: pdfplumber + Claude 이중 파싱으로 정확도 향상
3. **운용사 매칭**: 자모 분해, 초성, 영문↔한글 발음 변환 활용
4. **npm link**: 로컬 도구를 전역 명령어로 등록
5. **Vercel Functions**: Next.js 없이도 Serverless API 배포 가능

---

## 생성된 주요 파일

| 파일 | 설명 |
|-----|-----|
| `src/googleSheets.js` | Google Sheets API 클라이언트 |
| `src/pdf-parser.py` | pdfplumber 기반 PDF 파서 |
| `src/operator-matcher.js` | 운용사 유사도 매칭 |
| `src/review-workflow.js` | 검토/승인 워크플로우 |
| `.claude/commands/update.md` | PDF 처리 커맨드 |
| `client/` | React 관리자 대시보드 |
| `api/` | Vercel Serverless Functions |

---

## 도구 목록 (create-tool/)

| 도구 | 설명 |
|-----|-----|
| `md2pdf` | Markdown → PDF 변환 |
| `pdf2excel` | PDF 표 → Excel 추출 |
| `session-doc` | Claude Code 대화 문서화 |
| `org-matcher` | 조직명 유사도 매칭 |
