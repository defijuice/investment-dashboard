# KVIC 출자사업 자동화 전체 흐름 상세 분석

이 문서는 KVIC 공지사항 스크래핑부터 PDF 파싱, Google Sheets 저장까지의 전체 워크플로우를 상세히 분석한 결과입니다.

---

## 1. 전체 워크플로우 개요

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          KVIC 출자사업 자동화 파이프라인                        │
└─────────────────────────────────────────────────────────────────────────────┘

Phase 1: 스크래핑 & 다운로드
┌─────────────┐     ┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│ KVIC 웹사이트 │────▶│ 공지 목록    │────▶│ 파일 다운로드 │────▶│ Google Drive │
│ 공지사항     │     │ 추출        │     │ (로컬)       │     │ 업로드       │
└─────────────┘     └─────────────┘     └─────────────┘     └─────────────┘
                           │                   │                   │
                           ▼                   ▼                   ▼
                    processed.json       downloads/           파일 시트 등록

Phase 2: PDF 처리 (/update 커맨드)
┌─────────────┐     ┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│ 파일 쌍 찾기 │────▶│ 이중 파싱    │────▶│ 운용사 매칭  │────▶│ Google Sheets│
│ (접수+선정) │     │ (AI+Python) │     │ 유사도 검증  │     │ 저장        │
└─────────────┘     └─────────────┘     └─────────────┘     └─────────────┘
                           │                   │                   │
                           ▼                   ▼                   ▼
                    pdfplumber         operator-matcher      출자사업/신청현황

Phase 3: 금액 업데이트 (/amount-update 커맨드)
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│ 선정결과 PDF │────▶│ 금액 추출    │────▶│ 신청현황     │
│ 분석        │     │ 운용사 매칭  │     │ 금액 필드    │
└─────────────┘     └─────────────┘     └─────────────┘
                           │                   │
                           ▼                   ▼
                    병합 셀 처리           6개 금액 필드 업데이트

Phase 4: 검증 (/verify 커맨드)
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│ PDF 재분석   │────▶│ DB 데이터    │────▶│ 교차 검증    │
│             │     │ 비교        │     │ 리포트       │
└─────────────┘     └─────────────┘     └─────────────┘
```

---

## 2. Phase 1: 스크래핑 & 다운로드

### 2.1 핵심 파일
- [src/index.js](../src/index.js) - 메인 진입점
- [src/core/scraper.js](../src/core/scraper.js) - Puppeteer 스크래퍼
- [src/core/googleDrive.js](../src/core/googleDrive.js) - Google Drive 업로더
- [src/core/googleSheets.js](../src/core/googleSheets.js) - Sheets 클라이언트

### 2.2 스크래핑 흐름

```
npm start 실행
    │
    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│ Step 1: KVIC 공지사항 페이지 로드                                         │
│ URL: https://www.kvic.or.kr/notice/kvic-notice/investment-business-notice │
│ 파라미터: pageNo=1~MAX_PAGES                                             │
└─────────────────────────────────────────────────────────────────────────┘
    │
    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│ Step 2: 공지 목록 추출 (테이블 파싱)                                       │
│ 셀렉터: table tbody tr                                                   │
│ 컬럼: [번호, 카테고리, 첨부, 제목, 날짜]                                   │
│ 필터링: 카테고리 = '접수현황' OR '선정결과'                                 │
└─────────────────────────────────────────────────────────────────────────┘
    │
    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│ Step 3: 중복 체크 (processed.json)                                        │
│ 구조: { "notices": ["4653", "4652", ...] }                               │
│ 이미 처리된 공지 → 스킵                                                   │
└─────────────────────────────────────────────────────────────────────────┘
    │
    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│ Step 4: 상세 페이지에서 첨부파일 추출                                       │
│ URL: ?id={noticeId}                                                      │
│ 셀렉터: a.file-down, a[href*="fileDown"]                                 │
│ 추출: fileName, href, downloadUrl                                        │
└─────────────────────────────────────────────────────────────────────────┘
    │
    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│ Step 5: 파일 다운로드 (Fetch with credentials)                            │
│ 세션 쿠키 유지: credentials: 'include'                                    │
│ 파일명: Content-Disposition 헤더에서 추출                                  │
│ 저장: downloads/{noticeId}_{safeFileName}                                │
└─────────────────────────────────────────────────────────────────────────┘
    │
    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│ Step 6: Google Drive 업로드                                              │
│ 폴더: GOOGLE_DRIVE_FOLDER_ID                                            │
│ 반환: fileId, webViewLink, webContentLink                                │
└─────────────────────────────────────────────────────────────────────────┘
    │
    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│ Step 7: Google Sheets 등록 (파일 시트)                                    │
│ 컬럼: [ID, 파일명, 파일번호, 파일유형, 파일URL, 처리상태, ...]             │
│ 처리상태: '미처리'                                                        │
└─────────────────────────────────────────────────────────────────────────┘
    │
    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│ Step 8: 완료 표시 (processed.json 업데이트)                                │
└─────────────────────────────────────────────────────────────────────────┘
```

### 2.3 데이터 구조

**공지 객체 (Notice)**
```javascript
{
  id: "4653",                    // 공지 ID (board_view 파라미터)
  category: "접수현황",          // 또는 "선정결과"
  title: "중기부 2024년 1차...",
  date: "2024-01-15",
  hasAttachment: true
}
```

**첨부파일 객체 (Attachment)**
```javascript
{
  fileName: "접수현황.pdf",
  href: "/common/fileDown?...",
  downloadUrl: "https://www.kvic.or.kr/common/fileDown?..."
}
```

---

## 3. Phase 2: PDF 처리 (/update 커맨드)

### 3.1 핵심 파일
- [.claude/commands/update.md](../.claude/commands/update.md) - 커맨드 명세
- [src/processors/process-pair-sheets.js](../src/processors/process-pair-sheets.js) - 메인 프로세서
- [src/processors/pdf-parser.py](../src/processors/pdf-parser.py) - pdfplumber 파서
- [src/processors/pdf-compare.js](../src/processors/pdf-compare.js) - 비교 모듈
- [src/matchers/operator-matcher.js](../src/matchers/operator-matcher.js) - 운용사 매칭
- [src/workflows/review-workflow.js](../src/workflows/review-workflow.js) - 검토 워크플로우

### 3.2 /update 커맨드 흐름 (10단계)

```
/update {파일번호} 실행
    │
    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│ [1] 파일 정보 조회 & 쌍 찾기                                              │
│ ├─ 파일 시트에서 해당 파일번호 조회                                        │
│ ├─ PDF 내용에서 사업명 추출                                              │
│ └─ 반대 유형 파일 검색 (접수↔선정)                                        │
│     예: FH0081(접수) → FH0001(선정) 쌍 발견                              │
└─────────────────────────────────────────────────────────────────────────┘
    │
    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│ [2] PDF 이중 파싱 (정확도 향상)                                           │
│                                                                          │
│ 방법 1: Claude AI 직접 분석                                               │
│ ├─ pdftotext로 텍스트 추출                                               │
│ └─ Claude에 구조화된 JSON 요청                                           │
│                                                                          │
│ 방법 2: pdfplumber Python 파서                                           │
│ ├─ 테이블 구조 감지 (vertical_strategy: "lines")                         │
│ └─ 표 기반 데이터 추출                                                    │
│                                                                          │
│ 비교 & 병합:                                                             │
│ ├─ 일치 → 자동 진행                                                      │
│ ├─ Claude만 발견 → 포함 (정확도 높음)                                     │
│ ├─ pdfplumber만 발견 → 스킵 (노이즈)                                      │
│ └─ 충돌 → Claude 우선 (공동GP 불일치 시 사용자 확인)                       │
└─────────────────────────────────────────────────────────────────────────┘
    │
    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│ [3] 출자사업 확인/생성                                                    │
│ ├─ 기존 출자사업 검색 (사업명 기준)                                        │
│ ├─ 없으면 신규 생성 (PJ ID 자동 발급)                                     │
│ └─ 메타데이터: 소관, 공고유형, 연도, 차수                                  │
└─────────────────────────────────────────────────────────────────────────┘
    │
    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│ [4] 파일-출자사업 연결                                                    │
│ ├─ 접수파일: 지원파일ID 필드에 연결                                        │
│ ├─ 선정파일: 결과파일ID 필드에 연결                                        │
│ └─ ⚠️ 중복 연결 자동 감지 (DUPLICATE_FILE_LINK 에러)                       │
│     예: FH0044가 이미 PJ0021에 연결 → PJ0024 연결 시도 시 에러             │
└─────────────────────────────────────────────────────────────────────────┘
    │
    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│ [5] 기존 신청현황 조회                                                    │
│ ├─ 해당 출자사업의 모든 신청현황 조회                                      │
│ └─ 중복 키: 운용사ID|출자분야                                             │
│     예: "OP0001|중진 - 루키리그" 이미 존재 → 스킵                          │
└─────────────────────────────────────────────────────────────────────────┘
    │
    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│ [5.5] 운용사 유사도 매칭 (핵심 단계)                                       │
│                                                                          │
│ 9단계 유사도 검사:                                                        │
│ 1. 정확히 일치 (score: 1.0) → 기존 사용                                   │
│ 2. 정규화 후 일치 (score: 0.98) → 기존 사용                               │
│ 3. 약어 일치 → 기존 사용                                                  │
│ 4. 접미사 제거 후 일치 (score: 0.95)                                      │
│    └─ 접미사: 인베스트먼트, 벤처스, 파트너스, 캐피탈, LLC, Inc...         │
│ 5. 한글 자모 분해 비교 (score: jamoSim × 0.9)                            │
│ 6. 초성 비교 (score: choSim × 0.7)                                       │
│ 7. 영문↔한글 약어 양방향 매칭 (score: 0.85)                               │
│    └─ KB↔케이비, IBK↔아이비케이, BNK↔비엔케이                           │
│ 8. 부분 문자열 포함 (score: 0.7 + ratio × 0.25)                          │
│ 9. 일반 문자열 유사도 (Levenshtein)                                       │
│                                                                          │
│ 자동 판정 규칙:                                                           │
│ ├─ 85% 미만 → 신규 등록                                                  │
│ ├─ 85% 이상 & 핵심명 60% 미만 → 신규 (접미사만 일치)                      │
│ └─ 85% 이상 & 핵심명 60% 이상 → 사용자 확인 필요                          │
└─────────────────────────────────────────────────────────────────────────┘
    │
    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│ [6] 데이터 검토 (ReviewSession)                                           │
│                                                                          │
│ 화면 구성:                                                                │
│ ├─ 요약: PDF 기재 건수 vs 실제 파싱 건수                                   │
│ ├─ 신규 운용사 목록                                                       │
│ ├─ 중복 스킵 항목                                                         │
│ ├─ 공동GP 분리 결과                                                       │
│ └─ 전체 신청현황 테이블                                                    │
│                                                                          │
│ 명령어:                                                                   │
│ ├─ y: 승인 후 저장                                                       │
│ ├─ n: 취소                                                               │
│ ├─ e: 항목 수정 (운용사명, 출자분야, 상태)                                 │
│ └─ r: 리포트 다시 보기                                                    │
└─────────────────────────────────────────────────────────────────────────┘
    │
    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│ [7] 신청현황 생성/업데이트                                                 │
│                                                                          │
│ 접수현황 파일 처리:                                                        │
│ ├─ 신규 운용사 배치 생성 (createOperatorsBatch)                           │
│ ├─ 신청현황 배치 생성 (createApplicationsBatch)                           │
│ └─ 상태: '접수'                                                          │
│                                                                          │
│ 선정결과 파일 처리:                                                        │
│ ├─ 기존 신청현황 상태 업데이트                                             │
│ ├─ 선정 명단에 있음 → '선정'                                              │
│ └─ 선정 명단에 없음 → '탈락'                                              │
└─────────────────────────────────────────────────────────────────────────┘
    │
    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│ [8] 운용사 약어 업데이트                                                   │
│ ├─ 유사도 매칭으로 발견된 다른 표기법                                       │
│ └─ 기존 운용사의 약어 필드에 추가                                          │
│    예: "IBK벤처투자" 약어에 "아이비케이벤처투자" 추가                       │
└─────────────────────────────────────────────────────────────────────────┘
    │
    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│ [9] 파일 상태 업데이트                                                    │
│ ├─ 처리상태: '완료'                                                       │
│ ├─ 처리일시: 현재 타임스탬프                                               │
│ └─ 현황: 신청현황 테이블에서 계산 (⚠️ 파싱 결과 아님!)                      │
│                                                                          │
│ 현황 형식:                                                                │
│ ├─ 접수: "신청조합 171개, 공동GP 12개(...), 총 신청현황 165건"            │
│ └─ 선정: "총 165개 중 선정 45건"                                          │
└─────────────────────────────────────────────────────────────────────────┘
    │
    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│ [10] 출자사업 현황 업데이트                                                │
│ └─ 현황: "총 165건 (선정 45, 탈락 120)"                                   │
│    신청현황 테이블에서 자동 집계                                           │
└─────────────────────────────────────────────────────────────────────────┘
```

### 3.3 공동GP 처리

```
PDF 원본: "A인베스트먼트 / B벤처스"
    │
    ▼
분리 (구분자: /, ,)
    │
    ├─▶ 운용사 1: A인베스트먼트
    │   └─ 신청현황 1건 (비고: "공동GP")
    │
    └─▶ 운용사 2: B벤처스
        └─ 신청현황 1건 (비고: "공동GP")
```

### 3.4 금액 필드 형식

| PDF 표기 | 저장 값 | 통화단위 |
|---------|--------|---------|
| 300억원 | 300 | 억원 |
| 243.35억 | 243.35 | 억원 |
| USD 50M | 50 | USD(M) |

---

## 4. Phase 3: 금액 업데이트 (/amount-update 커맨드)

### 4.1 실행 시점
```
⚠️ /update 완료 후, 선정결과가 처리된 이후에 실행

왜?
├─ 접수현황 PDF에는 금액 정보 없음
├─ 선정결과 PDF에만 금액 정보 존재
└─ 선정된 신청현황에만 금액 필요
```

### 4.2 핵심 파일
- [.claude/commands/amount-update.md](../.claude/commands/amount-update.md) - 커맨드 명세
- [src/utils/batch-amount-update.js](../src/utils/batch-amount-update.js) - 배치 업데이트

### 4.3 업데이트 대상 필드 (6개)

| 필드명 | 열 | 설명 | 예시 |
|--------|-----|------|------|
| 최소결성규모 | E | 조합 최소 결성 규모 | 300 (억원) |
| 모태출자액 | F | 모태펀드 출자 금액 | 150 (억원) |
| 결성예정액 | G | 조합 결성 예정 금액 | 500 (억원) |
| 출자요청액 | H | 출자 요청 금액 | 200 (억원) |
| 통화단위 | I | 억원 또는 USD(M) | 억원 |
| 비고 | J | 병합 정보 등 | 병합: 최소 529억 (3사 공유) |

### 4.4 처리 흐름

```
/amount-update 실행
    │
    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│ Step 1: 데이터 준비                                                      │
│ ├─ 출자사업 시트 (결과파일ID가 있는 것만)                                  │
│ ├─ 파일 시트 (파일번호 → 파일명 매핑)                                     │
│ ├─ 운용사 시트 (운용사ID → 운용사명 매핑)                                 │
│ └─ 신청현황 시트 (상태='선정'만 필터)                                     │
└─────────────────────────────────────────────────────────────────────────┘
    │
    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│ Step 2: PDF 분석 및 금액 추출                                             │
│ ├─ downloads/ 폴더에서 결과파일 PDF 찾기                                  │
│ ├─ PDF 표에서 금액 정보 추출                                              │
│ └─ 운용사명 + 출자분야로 매칭 키 생성                                      │
│                                                                          │
│ PDF 표 컬럼 유형:                                                         │
│ ├─ Type A: 최소결성규모, 모태출자액, 운용사명 (중기부 정시)                 │
│ ├─ Type B: 결성예정액, 출자요청액, 운용사명 (문체부, 환경부)                │
│ └─ Type C: 4개 금액 모두 + 운용사명 (일부 사업)                            │
└─────────────────────────────────────────────────────────────────────────┘
    │
    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│ Step 3: 병합 셀 처리 (핵심)                                               │
│                                                                          │
│ 예: 재도약 분야 - 3개 운용사가 금액 공유                                   │
│ ├─ 원본: 최소결성규모 529억, 모태출자액 300억                              │
│ ├─ 분할: 529÷3=176.33억, 300÷3=100억                                    │
│ └─ 각 운용사에 동일 금액 저장 + 비고에 원본 정보                            │
│                                                                          │
│ 비고 형식: "병합: 최소결성규모 529억, 모태출자액 300억 (3사 공유)"          │
└─────────────────────────────────────────────────────────────────────────┘
    │
    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│ Step 4: 배치 업데이트                                                     │
│ └─ batchUpdate로 한 번에 업데이트 (API 호출 최소화)                        │
└─────────────────────────────────────────────────────────────────────────┘
```

### 4.5 자동 처리 규칙

| 상황 | 처리 방식 |
|------|----------|
| PDF에 금액 정보 없음 | 해당 필드 빈칸 유지 |
| 분야별 합계 (병합 셀) | n분의 1로 나눠서 입력 + 비고에 원본 기록 |
| 운용사 매칭 실패 | 스킵 (로그 출력) |
| 이미 금액 입력됨 | 덮어쓰기 |
| 해외VC 글로벌 펀드 | 통화단위: USD(M) |

---

## 5. Phase 4: 검증 (/verify 커맨드)

### 5.1 핵심 파일
- [src/workflows/ai-verification.js](../src/workflows/ai-verification.js) - 검증 모듈
- [src/verify-project.js](../src/verify-project.js) - CLI 진입점

### 5.2 검증 흐름

```
/verify {출자사업ID} 실행
    │
    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│ Step 1: 출자사업 메타데이터 로드                                           │
│ └─ 연결된 파일 목록 조회 (지원파일ID, 결과파일ID)                           │
└─────────────────────────────────────────────────────────────────────────┘
    │
    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│ Step 2: 각 파일별 검증                                                    │
│ ├─ PDF 다운로드 (downloads/ 폴더)                                        │
│ ├─ AI 재파싱 (Claude + pdfplumber)                                       │
│ ├─ DB 신청현황 조회 (getApplicationsByFile)                               │
│ └─ PDF ↔ DB 교차 검증                                                    │
│                                                                          │
│ 검증 항목:                                                                │
│ ├─ 건수 일치 (PDF 기재 vs DB 저장)                                        │
│ ├─ 운용사명 일치                                                          │
│ ├─ 출자분야 일치                                                          │
│ └─ 선정/탈락 상태 정확성                                                   │
└─────────────────────────────────────────────────────────────────────────┘
    │
    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│ Step 3: 운용사 약어 교차 검증                                              │
│ ├─ 접수파일 표기 vs 선정파일 표기 비교                                      │
│ │   예: 접수 "아이비케이캐피탈" ↔ 선정 "IBK캐피탈"                         │
│ └─ 약어 필드에 모든 표기법 포함 여부 확인                                   │
└─────────────────────────────────────────────────────────────────────────┘
    │
    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│ Step 4: 검증 리포트 출력                                                  │
│ ├─ ✅ 정상: 일치 항목                                                     │
│ ├─ ⚠️ 경고: 약어 누락 (자동 수정 가능)                                     │
│ └─ ❌ 오류: 누락/불일치 (수동 수정 필요)                                    │
└─────────────────────────────────────────────────────────────────────────┘
    │
    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│ Step 5: 확인완료 필드 업데이트                                             │
│ ├─ 모든 검증 통과 → 'AI확인완료'                                          │
│ ├─ 불일치 + 사용자 승인 → '수동확인완료'                                   │
│ └─ 불일치 + 사용자 거부 → '검증실패'                                       │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 6. Google Sheets 구조

### 6.1 4개 시트 구조

| 시트 | ID 형식 | 주요 컬럼 |
|------|--------|----------|
| **운용사** | OP | ID, 운용사명, **약어**, 유형, 국가 |
| **출자사업** | PJ | ID, 사업명, 소관, **지원파일ID**, **결과파일ID**, 현황, **확인완료** |
| **신청현황** | AP | ID, 출자사업ID, 운용사ID, 출자분야, 금액..., **상태**, 비고 |
| **파일** | FH | ID, 파일명, **파일번호**, **파일유형**, 파일URL, **처리상태**, **현황** |

### 6.2 파일-출자사업 관계

```
1:N 관계 (출자사업 1 : 파일 N)
┌─────────────────────────────────────────────────────────────────────────┐
│ PJ0001: 중기부 2024년 1차 정시                                           │
│ ├─ 지원파일ID: FH0081, FH0119 (일반 + 지역)                              │
│ └─ 결과파일ID: FH0001 (통합 선정결과)                                     │
└─────────────────────────────────────────────────────────────────────────┘

N:1 관계 (파일 N : 출자사업 1)
┌─────────────────────────────────────────────────────────────────────────┐
│ PJ0003: 문화/영화/해양 2024년 1차 정시                                    │
│ ├─ 지원파일ID: FH0082 (통합 접수현황)                                     │
│ └─ 결과파일ID: FH0002, FH0003 (해양 + 문화/영화 분리)                     │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 7. 핵심 비즈니스 규칙

### 7.1 상태 전이
```
(초기) → 접수 → 선정 또는 탈락
         │
         └─ 접수현황 파일 처리 시 설정
                    │
                    └─ 선정결과 파일 처리 시 업데이트
```

### 7.2 중복 방지 키
```
신청현황 중복 키: 운용사ID|출자분야

✅ 허용: 같은 운용사, 다른 분야
❌ 차단: 같은 운용사, 같은 분야, 같은 출자사업
```

### 7.3 현황 계산 원칙
```
⚠️ 반드시 신청현황 테이블에서 계산

❌ 잘못됨: 파일.현황 = "PDF에 50개 기재"
✅ 올바름: 파일.현황 = 신청현황.count() → "총 48개 중 선정 12건"
```

---

## 8. API 효율성

### 8.1 배치 처리
```javascript
// ❌ 비효율: 200건 × 개별 API 호출 = 400초 + 할당량 초과 위험
for (const name of names) {
  await sheets.getOrCreateOperator(name);
}

// ✅ 효율: 200건 → 1회 API 호출 ≈ 5초
await sheets.createOperatorsBatch(names);
await sheets.createApplicationsBatch(dataList);
```

### 8.2 할당량 관리
- 배치: 20건씩
- 배치 간 대기: 2초
- 초과 시: 1분 대기 후 재시도 (최대 3회)

---

## 9. 에러 처리

| 에러 코드 | 원인 | 처리 |
|----------|------|------|
| DUPLICATE_FILE_LINK | 파일이 다른 출자사업에 이미 연결 | 프로세스 중단, 수동 확인 필요 |
| API 할당량 초과 | 분당 요청 제한 | 1분 대기 후 재시도 |
| PDF 파싱 실패 | 비정형 PDF | 해당 파일 스킵, 로그 기록 |

---

## 요약

이 시스템은 **4단계 파이프라인**으로 KVIC 출자사업 데이터를 자동화합니다:

```
1. 스크래핑 (npm start)
   └─ KVIC → 다운로드 → Drive/Sheets

2. PDF 처리 (/update)
   └─ 이중 파싱 → 유사도 매칭 → 신청현황 생성/상태 업데이트

3. 금액 업데이트 (/amount-update)  ← 선정 완료 후
   └─ 선정결과 PDF → 금액 추출 → 신청현황 금액 필드

4. 검증 (/verify)
   └─ PDF↔DB 교차 검증 → 불일치 리포트
```

**핵심 설계 원칙**:
- 정확도 > 자동화 (사용자 확인 필수)
- 배치 처리 > 개별 호출 (API 효율성)
- DB 계산 > 파싱 결과 (데이터 정합성)
- 이중 파싱 > 단일 파싱 (오류 감지)
